import streamlit as st

# Event services with mock prices
event_services = {
    "Venue": 50000,
    "Catering": 70000,
    "Photography": 25000,
    "Music DJ": 15000,
    "Decoration": 30000,
    "Security": 10000,
    "Transportation": 12000
}

# Smart negotiation logic
def negotiate(base_cost, offer):
    margin = 0.15  # 15% flexibility
    min_acceptable = base_cost * (1 - margin)

    if offer >= base_cost:
        return "âœ… Full price accepted! Thank you!", base_cost
    elif offer >= min_acceptable:
        return f"âœ… Deal! We'll accept your offer of â‚¹{offer}.", offer
    elif offer >= base_cost * 0.7:
        counter = int((offer + base_cost) / 2)
        return f"ğŸ¤ Hmm, that's a bit low. How about â‚¹{counter}?", counter
    else:
        return "âŒ Sorry, your offer is too low to continue negotiations.", None

# Streamlit UI
st.set_page_config(page_title="Event Negotiation Bot", page_icon="ğŸ¤–")
st.title("ğŸ‰ Event Cost Estimator & Negotiation Bot")

st.header("ğŸ“‹ Select Services You Need")
selected_services = st.multiselect("Choose from below:", list(event_services.keys()))

if selected_services:
    total_cost = sum(event_services[service] for service in selected_services)
    st.success(f"ğŸ’° Estimated Total Cost: â‚¹{total_cost}")

    offer = st.number_input("ğŸ’¬ Enter your offer (in â‚¹):", min_value=0, step=1000)

    if st.button("ğŸ¤– Negotiate"):
        message, final_price = negotiate(total_cost, offer)
        st.info(message)
        if final_price:
            st.success(f"âœ… Final Agreed Cost: â‚¹{final_price}")
else:
    st.warning("Please select at least one service to continue.")
